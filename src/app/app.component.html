<main class="container mx-auto p-4 sm:p-8 font-sans text-slate-200">
  <header class="text-center mb-10">
    <h1 class="text-4xl sm:text-5xl font-bold text-cyan-400">Controle de Prazos</h1>
    <p class="text-slate-400 mt-2">Adicione, gerencie e nunca mais perca um prazo importante.</p>
  </header>

  <!-- Form Section -->
  <section class="bg-slate-800/50 backdrop-blur-sm p-6 rounded-xl shadow-lg mb-12 max-w-2xl mx-auto border border-slate-700">
    <h2 class="text-2xl font-semibold mb-6 text-white">Novo Prazo</h2>
    <form (submit)="$event.preventDefault(); addDeadline()" class="space-y-4">
      <div>
        <label for="subject" class="block text-sm font-medium text-slate-300 mb-1">Assunto</label>
        <input id="subject" type="text" placeholder="Ex: Relatório Anual" 
               [value]="subject()" (input)="onSubjectInput($event)"
               class="w-full bg-slate-700 border border-slate-600 rounded-md p-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition">
      </div>
      <div>
        <label for="recipient" class="block text-sm font-medium text-slate-300 mb-1">Destinatário</label>
        <input id="recipient" type="text" placeholder="Ex: Departamento Financeiro" 
               [value]="recipient()" (input)="onRecipientInput($event)"
               class="w-full bg-slate-700 border border-slate-600 rounded-md p-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition">
      </div>
      <div>
        <label for="deadline" class="block text-sm font-medium text-slate-300 mb-1">Prazo</label>
        <input id="deadline" type="text" placeholder="Ex: '30 dias' ou '25/12/2024'" 
               [value]="deadlineInput()" (input)="onDeadlineInput($event)"
               class="w-full bg-slate-700 border border-slate-600 rounded-md p-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition">
      </div>
      
      @if (errorMessage()) {
        <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-2 rounded-md text-sm">
          {{ errorMessage() }}
        </div>
      }

      <button type="submit" class="w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-cyan-500">
        Adicionar Prazo
      </button>
    </form>
  </section>

  <!-- Deadlines List -->
  <section class="max-w-4xl mx-auto">
    @if (hasDeadlines()) {
      <h2 class="text-2xl font-semibold mb-6 text-white text-center sm:text-left">Seus Prazos</h2>
      <div class="space-y-4">
        @for (deadline of sortedDeadlines(); track deadline.id) {
          <div [class]="getCardClasses(deadline.status)">
            <div class="flex-grow">
              <div class="flex items-center gap-3 mb-2 flex-wrap">
                 <span class="font-bold text-lg text-white">{{ deadline.subject }}</span>
                 <span class="text-xs font-semibold px-2 py-1 rounded-full"
                    [class]="{
                      'bg-red-500/20 text-red-300': deadline.status === 'overdue',
                      'bg-orange-500/20 text-orange-300': deadline.status === 'due',
                      'bg-yellow-500/20 text-yellow-300': deadline.status === 'upcoming',
                      'bg-green-500/20 text-green-300': deadline.status === 'safe'
                    }">
                  {{ getStatusText(deadline.status) }}
                </span>
              </div>
              <p class="text-sm text-slate-400">
                <span class="font-semibold text-slate-300">Destinatário:</span> {{ deadline.recipient }}
              </p>
              <p class="text-sm text-slate-400">
                <span class="font-semibold text-slate-300">Vencimento:</span> {{ deadline.dueDate.toLocaleDateString('pt-BR') }} 
                <span class="italic">({{ getDaysRemaining(deadline.dueDate) }})</span>
              </p>
            </div>
            <button (click)="deleteDeadline(deadline.id)" aria-label="Deletar prazo"
                    class="bg-slate-700 hover:bg-red-500 text-slate-300 hover:text-white p-2 rounded-full transition-colors self-start sm:self-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-red-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
        }
      </div>
    } @else {
      <div class="text-center bg-slate-800/50 p-8 rounded-xl border border-dashed border-slate-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        <h3 class="mt-4 text-xl font-semibold text-white">Nenhum prazo cadastrado</h3>
        <p class="mt-1 text-slate-400">Use o formulário acima para começar a organizar suas tarefas.</p>
      </div>
    }
  </section>
</main>